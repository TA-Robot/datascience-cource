# 1.1.1 集合論とσ-代数

## 集合論の基礎概念

確率論を学ぶ前に、まず集合論の基本を理解しましょう。集合とは、「モノの集まり」を表す数学的な概念です。例えば、「サイコロを振って出る目の集合」は {1, 2, 3, 4, 5, 6} となります。

### 集合の表し方
- **列挙法**：A = {1, 2, 3}
- **内包的記法**：A = {x | xは10以下の自然数}（「xは10以下の自然数」という条件を満たすxの集合）

### 基本的な集合の種類
- **空集合** ∅：要素を1つも持たない集合
- **全体集合** Ω：考えている全ての対象を含む集合
- **有限集合**：要素の数が有限個の集合
- **無限集合**：要素の数が無限個の集合
- **可算集合**：自然数と1対1対応がつく集合（例：整数全体、有理数全体）
- **非可算集合**：自然数と1対1対応がつかない集合（例：実数全体）

## 事象の演算とその基本性質

確率論では、起こりうる結果の全体を**標本空間（sample space）**Ωと呼び、その部分集合を**事象（event）**と呼びます。

### 事象の例
- サイコロを振るとき：
  - 標本空間 Ω = {1, 2, 3, 4, 5, 6}
  - 「偶数の目が出る」という事象 A = {2, 4, 6}
  - 「3以上の目が出る」という事象 B = {3, 4, 5, 6}

### 事象間の演算

事象間には以下の演算が定義されます：

- **和集合（union）**: 事象AとBの和集合A∪Bは、AまたはBのいずれかが起こる事象です。
  - 例：A∪B = {2, 3, 4, 5, 6}（偶数の目または3以上の目）

- **積集合（intersection）**: 事象AとBの積集合A∩Bは、AとBの両方が同時に起こる事象です。
  - 例：A∩B = {4, 6}（偶数かつ3以上の目）

- **補集合（complement）**: 事象Aの補集合A^c（またはA'）は、Aが起こらない事象です。
  - 例：A^c = {1, 3, 5}（偶数でない目＝奇数の目）

- **差集合（difference）**: 事象AとBの差集合A\Bは、Aに属するがBには属さない要素からなる集合です。
  - 例：A\B = {2}（偶数だが3未満の目）

### 集合演算の基本性質

これらの演算には以下の基本性質があります：

1. **交換法則**:
   - A∪B = B∪A（和集合の順序は関係ない）
   - A∩B = B∩A（積集合の順序は関係ない）

2. **結合法則**:
   - (A∪B)∪C = A∪(B∪C)（和集合のグループ化は自由）
   - (A∩B)∩C = A∩(B∩C)（積集合のグループ化は自由）

3. **分配法則**:
   - A∩(B∪C) = (A∩B)∪(A∩C)
   - A∪(B∩C) = (A∪B)∩(A∪C)

4. **ド・モルガンの法則**:
   - (A∪B)^c = A^c∩B^c（「AかBが起こる」の否定は「Aが起こらず、かつBも起こらない」）
   - (A∩B)^c = A^c∪B^c（「AかつBが起こる」の否定は「Aが起こらないか、またはBが起こらない」）

5. **その他の性質**:
   - A∪A = A, A∩A = A（べき等法則）
   - A∪∅ = A, A∩Ω = A（単位元法則）
   - A∪Ω = Ω, A∩∅ = ∅（吸収法則）
   - (A^c)^c = A（二重否定）

### ベン図による直感的理解

集合の演算は、ベン図を使うと直感的に理解できます。ベン図とは、集合を円や楕円などの図形で表し、その包含関係や演算結果を視覚的に示す図です。

- A∪B：AとBの円を合わせた領域全体
- A∩B：AとBの円が重なる部分
- A^c：Aの円の外側（全体集合Ω内）
- A\B：Aの円からBの円と重なる部分を除いた領域

## Borel集合とBorel σ-代数

実数空間R上では、様々な種類の集合が考えられますが、特に「測定可能」という性質を持つ集合を考えることが重要です。
測定可能とは、小学生向けにいえば、「長さ」「面積」「体積」などを測ることができる集合のことです。

例えば、実数直線R上の開区間(a,b)は、長さを測ることができるので、測定可能な集合です。

ここでσ代数という言葉を考えます。
σ代数は、測定可能な集合の族です。（族とは、集合を集めたものです。）
測定可能な集合の族とは、測定可能な集合を集めたものです。

例えばサイコロを考えます。
サイコロの目の出方について、私たちは以下のような事象を考えることができます：
- 「偶数の目が出る」という事象
- 「3以上の目が出る」という事象
- 「1の目が出る」という事象

これらの事象について、以下のような操作が可能です：

1. 「〜でない」という否定（補集合）
   - 「偶数の目が出ない」（つまり奇数の目が出る）

2. 「〜または〜」という結合（和集合）
   - 「偶数の目が出る」または「3以上の目が出る」

3. 「〜かつ〜」という結合（積集合）
   - 「偶数の目」かつ「3以上の目」（つまり4,6の目）

つまりサイコロは、このような集合をいじる操作を何回行っても、常に「意味のある事象」として扱える集合の族です。
σ-代数とは、このような操作を何回行っても、常に「意味のある事象」として扱える集合の族のことです。


### Borel集合の定義と例

実数空間R上の開区間や閉区間などから生成される最小のσ-代数を**Borel σ-代数**と呼び、B(R)と表記します。Borel σ-代数に属する集合は**Borel集合**と呼ばれます。

実数空間Rにおける代表的なBorel集合：
- **開区間** (a, b) = {x | a < x < b}
- **閉区間** [a, b] = {x | a ≤ x ≤ b}
- **半開区間** [a, b) = {x | a ≤ x < b} や (a, b] = {x | a < x ≤ b}
- **有理数全体** Q = {p/q | p, qは整数、q ≠ 0}
- **無理数全体** R\Q
- **単一点集合** {a}
- **可算集合**（要素が可算無限個の集合）
- **カントール集合**（実数の範囲で非可算無限集合だが測度0の集合）

### Borel集合の構成方法

Borel集合は以下のような段階的な構成過程で理解できます：

1. まず、実数直線上の全ての開区間 (a, b) を考える
2. これらの開区間の補集合、和集合、積集合を考える
3. さらにそれらの補集合、和集合、積集合を考える
4. これを繰り返して得られる集合族が Borel σ-代数

すなわち、Borel σ-代数は実数直線上の開集合から始めて、補集合と可算個の和集合の演算を繰り返し適用して得られる最小の集合族です。

### Borel集合の重要性

Borel集合は以下の理由で重要です：
- 測度論や確率論で扱う集合のほとんどがBorel集合である
- 連続関数の逆像がBorel集合になる
- 可測関数（確率変数など）を定義する際の基礎となる

## σ-代数の構成と完備化

### σ-代数の定義

**σ-代数（sigma-algebra）** F は、標本空間Ωの部分集合族で以下の条件を満たすものです：

1. Ω ∈ F（全体集合が含まれる）
2. A ∈ F ならば A^c ∈ F（補集合について閉じている）
3. A₁, A₂, ... ∈ F ならば ∪ⁿᵢ₌₁Aᵢ ∈ F（可算個の和集合について閉じている）

これらの条件から以下のことも導かれます：
- ∅ ∈ F（空集合も含まれる）
- A₁, A₂, ... ∈ F ならば ∩ⁿᵢ₌₁Aᵢ ∈ F（可算個の積集合について閉じている）

### σ-代数の例

1. **自明なσ-代数**: F = {∅, Ω}
   - 最も小さいσ-代数で、空集合と全体集合のみを含む

2. **べき集合**: F = 2^Ω
   - 最も大きいσ-代数で、Ωの全ての部分集合を含む

3. **有限分割から生成されるσ-代数**:
   - Ω = {1, 2, 3, 4, 5, 6}を
   - A = {1, 3, 5}, B = {2, 4, 6}に分割
   - F = {∅, A, B, Ω}

### σ-代数の生成

与えられた集合族から最小のσ-代数を生成することができます。例えば：

1. **生成されるσ-代数**: ある集合族Cから生成される最小のσ-代数をσ(C)と表記します。
   - 例：実数R上の全ての開区間の集合族Cに対して、σ(C) = B(R)（Borel σ-代数）

2. **単調類定理**: 積について閉じていない集合族Cから単調類（monotone class）を生成し、σ-代数を構成する手法

### σ-代数の完備化

**完備化（completion）**とは、測度ゼロの集合の部分集合もσ-代数に含めることで、より使いやすいσ-代数にする操作です。

例えば、ルベーグ測度λに関して：
1. N ⊂ Rがλ(N) = 0となるBorel集合
2. M ⊂ Nとなる任意の集合M
3. このようなMをすべてBorel σ-代数に追加

これにより得られるのが**ルベーグ完備σ-代数**（または単に**ルベーグ可測集合**の族）です。完備化によって、測度論の多くの定理がより使いやすくなります。

## 可測空間と測度

### 可測空間の定義

**可測空間（measurable space）**とは、標本空間Ωとそのσ-代数Fの組 (Ω, F) のことです。可測空間は、「測れる対象」を明確にするための枠組みを提供します。

### 測度の定義と性質

**測度（measure）** μとは、σ-代数F上の関数 μ: F → [0, ∞] で、以下の条件を満たすものです：

1. **非負性**: すべてのA ∈ Fに対して、μ(A) ≥ 0
2. **空集合の測度**: μ(∅) = 0（空集合の測度は0）
3. **可算加法性（σ-加法性）**: A₁, A₂, ... ∈ Fが互いに素（AᵢとAⱼが交わらない）ならば、μ(∪ⁿᵢ₌₁Aᵢ) = Σⁿᵢ₌₁μ(Aᵢ)

これにより、測度は集合の「大きさ」「体積」「確率」などを一般化した概念となります。

### 測度の例

1. **計数測度（counting measure）**:
   - 集合の要素数を測度とする
   - μ(A) = |A|（Aの要素数、無限の場合は∞）

2. **ルベーグ測度（Lebesgue measure）**:
   - 実数直線上の区間の長さを一般化
   - λ([a, b]) = b - a
   - R上の「自然な」体積の概念

3. **ディラック測度（Dirac measure）**:
   - 特定の点xₒに質量を集中
   - δ(A) = 1（xₒ ∈ A）、δ(A) = 0（xₒ ∉ A）

4. **ルベーグ・スティルチェス測度（Lebesgue-Stieltjes measure）**:
   - 分布関数Fから導かれる測度
   - μ([a, b]) = F(b) - F(a)

### 測度の拡張定理

有限加法的な測度を、σ-加法的な測度に拡張するための重要な定理があります：

1. **カラテオドリの拡張定理**: 代数上の有限加法的測度を、その代数から生成されるσ-代数上のσ-加法的測度に一意的に拡張できる

2. **測度の外測度による構成**: 外測度（outer measure）を定義し、それをもとにして測度を構成する方法

## 確率測度と一般測度の違い

### 確率測度の定義

**確率測度（probability measure）** Pは、以下の条件を満たす特殊な測度です：

1. **確率の非負性**: 全ての事象A ∈ Fについて、0 ≤ P(A) ≤ 1
2. **全体集合の確率**: P(Ω) = 1（全体集合の確率は1）
3. **確率の加法性**: A₁, A₂, ... ∈ Fが互いに素ならば、P(∪ⁿᵢ₌₁Aᵢ) = Σⁿᵢ₌₁P(Aᵢ)

### 確率測度と一般測度の相違点

一般の測度と確率測度の主な違いは：

1. **値域の制約**:
   - 確率測度: 0から1までの値
   - 一般測度: 0から∞までの値をとりうる

2. **全体集合の測度**:
   - 確率測度: P(Ω) = 1（必ず1）
   - 一般測度: μ(Ω)は任意の非負値（有限または∞）

3. **正規化可能性**:
   - 有限測度（μ(Ω) < ∞）は、μ(A)/μ(Ω)により確率測度に正規化できる
   - 無限測度（μ(Ω) = ∞）は正規化できない

4. **解釈の違い**:
   - 確率測度: 事象の「起こりやすさ」を表す
   - 一般測度: 集合の「大きさ」や「体積」を表す

### 測度の具体例

1. **ルベーグ測度の例**:
   - λ([0,1]) = 1（単位区間の長さは1）
   - λ(R) = ∞（実数全体の「長さ」は無限大）

2. **確率測度の例**:
   - サイコロを振る場合: P({1}) = P({2}) = ... = P({6}) = 1/6
   - 正規分布N(0,1)の確率測度: P([-1, 1]) ≈ 0.6827（±1標準偏差の範囲）

## 0-1法（ブローリ＝カンテリの補題）

### Borel-Cantelliの補題

**Borel-Cantelli（ブローリ＝カンテリ）の補題**は確率論における重要な結果で、事象の無限列について、その事象が無限回起こる確率を評価するものです。

#### 第一補題（収束判定条件）

事象列{Aₙ}について、Σⁿᵢ₌₁P(Aᵢ) < ∞（確率の総和が有限）ならば、P(limsup Aₙ) = 0となります。

ここで、limsup Aₙ = ∩ₖ₌₁^∞ ∪ₙ₌ₖ^∞ Aₙは「無限個の事象Aₙが起こる」ことを意味します。

言い換えると：「各事象の確率の和が有限なら、それらの事象が無限回起こる確率は0である」

#### 第二補題（発散判定条件）

事象列{Aₙ}が互いに独立で、Σⁿᵢ₌₁P(Aᵢ) = ∞（確率の総和が無限大）ならば、P(limsup Aₙ) = 1となります。

言い換えると：「独立な事象の確率の和が無限大なら、それらの事象が無限回起こる確率は1である」

### Borel-Cantelliの補題の応用例

1. **コイン投げの例**:
   - 公平なコインを無限回投げる
   - Aₙ = 「n回目に表が出る」とすると、P(Aₙ) = 1/2
   - Σⁿᵢ₌₁P(Aᵢ) = ∞なので、表は無限回出る（確率1）

2. **サイコロの例**:
   - サイコロを無限回振る
   - Aₙ = 「n回目に6の目が出る」とすると、P(Aₙ) = 1/6
   - Σⁿᵢ₌₁P(Aᵢ) = ∞なので、6の目は無限回出る（確率1）

3. **確率が急速に小さくなる例**:
   - Aₙ = 「n回目の試行で1/n²の確率で成功」
   - Σⁿᵢ₌₁P(Aᵢ) = Σⁿᵢ₌₁(1/n²) < ∞
   - よって事象Aₙは有限回しか起こらない（確率1）

### 0-1法則の拡張

Borel-Cantelliの補題は「0-1法則」の一例です。0-1法則とは、ある種の事象が確率0か1のどちらかをとることを示す法則です。

他の重要な0-1法則：

1. **コルモゴロフの0-1法則**:
   - 無限列の「裾事象（tail event）」は確率0か1をとる

2. **ヒューイットとサベージの0-1法則**:
   - 交換可能な確率変数列における「対称事象」は確率0か1をとる

3. **エルゴード定理**:
   - エルゴード的な確率過程における不変事象は確率0か1をとる

これらの法則は、長期的な振る舞いや対称性に関連する事象が、「ほぼ確実に起こる」か「ほぼ確実に起こらない」かのどちらかであることを示しています。
